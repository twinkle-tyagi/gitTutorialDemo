<html>
    <body>
        <script > 
        console.log('person1: show ticket');
        console.log('person2: show ticket');

        // Promise
            /*
            const wifeTicket = new Promise((resolve, reject) => {
                setTimeout(() => resolve('ticket'), 3000);
            });

            //wifeTicket.then((t) => console.log('person3: ticket'));
            
            const getPopcorn = wifeTicket.then((t) => {
                console.log('wife: I have tickets');
                console.log('husband: We should go in');
                console.log('wife: No I am hungry');

                return new Promise((resolve, reject) => resolve(`${t} popcorn`));
            });
            //getPopcorn.then((t) => console.log(t));

            const getButter = getPopcorn.then((t) => {
                console.log(`husband: I have ${t}`);
                console.log('husband: lets get in');
                console.log('wife: I want butter on my popcorn');
                return new Promise((resolve, reject) => resolve('butter'));
            }); 
            getButter.then((t) => console.log(t));

            console.log('person4: show ticket');
            console.log('person5: show ticket');
            */
           // const preMovie = async () => 'preMovie'; // async to make it asynchronous

            const preMovie = async () =>{
                const wifeTicket = new Promise((resolve, reject) => {
                setTimeout(() => resolve('ticket'), 3000);
            });
                const getPopcorn = new Promise((resolve, reject) => resolve('popcorn'));

                const getButter = new Promise((resolve, reject) => resolve('butter'));

                const getColdDrink = new Promise((resolve, reject) => resolve('cold drink'));

                let ticket = await wifeTicket;

                console.log('wife: I have tickets');
                console.log('husband: We should go in');
                console.log('wife: No I am hungry');

                let popcorn = await getPopcorn;

                console.log(`husband: I have ${popcorn}`);
                console.log('husband: lets get in');
                console.log('wife: I want butter on my popcorn');

                let butter = await getButter;

                console.log(`husband: I have got ${butter}`);
                console.log('husband: lets get in');
                console.log('wife: yes we are getting late');

                let coldDrink = await getColdDrink;
            
                console.log('here is your cold drink');

                let [popcorn1, butter1, coke] = await Promise.all([getPopcorn, getButter, getColdDrink]); 
                return ticket;
    }

        preMovie().then((m) => console.log(`person3: shows ${m}`));

        console.log('person4: show ticket');
        console.log('person5: show ticket');



        </script>
    </body>
</html>